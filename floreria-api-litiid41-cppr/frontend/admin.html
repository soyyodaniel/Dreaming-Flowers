<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Admin - Dreaming Flowers</title>
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- FontAwesome para iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Estilos CSS -->
    <link rel="stylesheet" href="css/admin.css">
</head>

<body>

    <!-- 1. Barra de navegaci√≥n -->
    <nav class="navbar navbar-expand-lg navbar-dark navbar-custom">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-seedling me-2"></i>Dreaming Admin
            </a>
            <div class="d-flex align-items-center">
                <div class="text-end me-3 d-none d-md-block">
                    <small class="d-block text-white-50" style="font-size: 0.75rem;">Bienvenido</small>
                    <span class="text-white fw-bold" id="userNameDisplay">Admin</span>
                </div>
                <button id="logoutBtn" class="btn btn-light btn-sm rounded-pill px-3 text-danger fw-bold">
                    <i class="fas fa-sign-out-alt"></i> Salir
                </button>
            </div>
        </div>
    </nav>

    <div class="container mt-5">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="text-secondary fw-bold">Panel de Control</h2>
            <span class="badge bg-light text-secondary border p-2">
                <i class="fas fa-calendar-alt me-1"></i> Gesti√≥n de Florer√≠as
            </span>
        </div>

        <!-- 2. Secci√≥n de estad√≠sticas -->
        <div class="row mb-5 g-4">
            <!-- Tarjeta Total (Rosa) -->
            <div class="col-md-4">
                <div class="card stat-card card-pink shadow">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="text-uppercase mb-2" style="opacity: 0.8;">Total Registradas</h6>
                                <h1 class="display-4 fw-bold mb-0" id="totalFlorerias">0</h1>
                            </div>
                            <i class="fas fa-store stat-icon-bg text-white"></i>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Tarjeta Activas (Verde) -->
            <div class="col-md-4">
                <div class="card stat-card bg-success text-white shadow">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="text-uppercase mb-2" style="opacity: 0.8;">En Operaci√≥n</h6>
                                <h1 class="display-4 fw-bold mb-0" id="activeFlorerias">0</h1>
                            </div>
                            <i class="fas fa-check-circle stat-icon-bg text-white"></i>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Tarjeta Inactivas (Gris) -->
            <div class="col-md-4">
                <div class="card stat-card bg-secondary text-white shadow">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="text-uppercase mb-2" style="opacity: 0.8;">Inactivas</h6>
                                <h1 class="display-4 fw-bold mb-0" id="inactiveFlorerias">0</h1>
                            </div>
                            <i class="fas fa-pause-circle stat-icon-bg text-white"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 3. Secci√≥n de tabla (CRUD) -->
        <div class="card shadow border-0 rounded-4 overflow-hidden">
            <div class="card-header bg-white d-flex justify-content-between align-items-center py-4 px-4 border-bottom">
                <div>
                    <h5 class="mb-1 text-dark fw-bold">Listado de Florer√≠as</h5>
                    <small class="text-muted">Administra el cat√°logo visible para los clientes</small>
                </div>
                <button class="btn btn-primary rounded-pill px-4 shadow-sm" onclick="openModal()">
                    <i class="fas fa-plus me-2"></i> Nueva Florer√≠a
                </button>
            </div>
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover align-middle mb-0 table-custom">
                        <thead class="bg-light">
                            <tr>
                                <th class="ps-4 py-3">Logo</th>
                                <th class="py-3">Nombre</th>
                                <th class="py-3">Ubicaci√≥n</th>
                                <th class="py-3">Contacto</th>
                                <th class="py-3">Estatus</th>
                                <th class="text-end pe-4 py-3">Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="floreriasTableBody">
                            <!-- JS carga esto -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Footer con controles de Paginaci√≥n -->
            <div class="card-footer bg-white border-0 py-3 px-4 d-flex justify-content-between align-items-center">
                <small class="text-muted" id="pagingInfo">Cargando...</small>
                <nav>
                    <ul class="pagination pagination-sm mb-0">
                        <li class="page-item">
                            <button class="btn btn-outline-secondary btn-sm me-2 rounded-pill" id="prevBtn" disabled>
                                <i class="fas fa-chevron-left"></i> Anterior
                            </button>
                        </li>
                        <li class="page-item">
                            <button class="btn btn-outline-secondary btn-sm rounded-pill" id="nextBtn" disabled>
                                Siguiente <i class="fas fa-chevron-right"></i>
                            </button>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>

    </div> <!-- Cierre del Container -->


    <!-- 4. Modal (Formulario Emergente) -->
    <div class="modal fade" id="floreriaModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content border-0 rounded-4">
                <div class="modal-header modal-header-pink">
                    <h5 class="modal-title fw-bold" id="modalTitle">Nueva Florer√≠a</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body p-4">
                    <form id="floreriaForm">
                        <input type="hidden" id="floreriaId">

                        <div class="row g-3">
                            <!-- Secci√≥n Principal -->
                            <div class="col-12">
                                <h6 class="text-muted text-uppercase small fw-bold mb-3 border-bottom pb-2">Informaci√≥n
                                    General</h6>
                            </div>

                            <div class="col-md-6">
                                <label class="form-label fw-semibold">Nombre <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="nombre" required
                                    placeholder="Ej: Florer√≠a El Rosal">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-semibold">Ciudad (ID) <span
                                        class="text-danger">*</span></label>
                                <input type="number" class="form-control" id="id_ciudad" required
                                    placeholder="Ej: 1 (CDMX)">
                            </div>
                            <div class="col-12">
                                <label class="form-label fw-semibold">Descripci√≥n</label>
                                <textarea class="form-control" id="descripcion" rows="2"
                                    placeholder="Breve descripci√≥n del negocio..."></textarea>
                            </div>

                            <!-- Secci√≥n Contacto -->
                            <div class="col-12 mt-4">
                                <h6 class="text-muted text-uppercase small fw-bold mb-3 border-bottom pb-2">Contacto y
                                    Ubicaci√≥n</h6>
                            </div>

                            <div class="col-md-6">
                                <label class="form-label">Tel√©fono</label>
                                <div class="input-group">
                                    <span class="input-group-text bg-light"><i class="fas fa-phone"></i></span>
                                    <input type="text" class="form-control" id="telefono">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Email</label>
                                <div class="input-group">
                                    <span class="input-group-text bg-light"><i class="fas fa-envelope"></i></span>
                                    <input type="email" class="form-control" id="email">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Ubicaci√≥n</label>
                                <input type="text" class="form-control" id="ubicacion"
                                    placeholder="Calle, N√∫mero, Colonia">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Horario</label>
                                <input type="text" class="form-control" id="horario"
                                    placeholder="Ej: Lun-Sab 9:00-19:00">
                            </div>

                            <!-- Secci√≥n Estado -->
                            <div class="col-12 mt-4">
                                <h6 class="text-muted text-uppercase small fw-bold mb-3 border-bottom pb-2">
                                    Configuraci√≥n</h6>
                            </div>

                            <div class="col-md-6">
                                <label class="form-label fw-semibold">Estatus</label>
                                <select class="form-select" id="estatus">
                                    <option value="1">üü¢ Activa (Visible)</option>
                                    <option value="2">‚ö™ Inactiva (Oculta)</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-semibold">Logo</label>
                                <input type="file" class="form-control" id="logoInput" accept="image/*">
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer bg-light border-0">
                    <button type="button" class="btn btn-secondary rounded-pill px-4"
                        data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary rounded-pill px-4" onclick="saveFloreria()">
                        <i class="fas fa-save me-1"></i> Guardar Cambios
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/admin.js"></script>
</body>

</html>